package require tcltest
namespace import ::tcltest::test
namespace import ::tcltest::cleanupTests
namespace import ::tcltest::testConstraint

set files [lsort [glob -nocomplain "~/ci-development/tcl/*.tcl"]]

foreach file $files {
    source $file
}

test proc_names_parse-1.0 \
    {Test that proc names are parsed from a string.} \
    -body {
        set proc_names [proc_names_parse {
            proc proc_names_test_1 {args} {
                return "Hello World"
            }

            proc ::proc_names_test_2 {arg1 arg2} {
                return "Hello World"
            }

            proc testing::proc_names_test_3 {} {
                return "Hello World"
            }

            proc testing::names::proc_names_test_4 {} {
                return "Hello World"
            }

            proc ::testing::names::proc_names_test_4 {} {
                return "Hello World"
            }
        }]

        return [expr {
                      [llength $proc_names] == 5
                      && "proc_names_test_1" in $proc_names
                      && "::proc_names_test_2" in $proc_names
                      && "testing::proc_names_test_3" in $proc_names
                      && "testing::names::proc_names_test_4" in $proc_names
                      && "::testing::names::proc_names_test_4" in $proc_names
                  }]
    } \
    -result 1

cleanupTests
