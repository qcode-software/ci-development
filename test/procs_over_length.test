package require tcltest
namespace import ::tcltest::test
namespace import ::tcltest::cleanupTests
namespace import ::tcltest::testConstraint

set files [lsort [glob -nocomplain "~/ci-development/tcl/*.tcl"]]

foreach file $files {
    source $file
}

set setup {
    set test_file "~/ci-development/test/files/linter_test.tcl"
}

test procs_over_length_report-1.0 \
    {Test that procs with bodies over a specified number of lines are reported.} \
    -setup $setup \
    -body {
        set report [procs_over_length_report [list $test_file] 3]

        return [expr { [string length $report] > 0 }]
    } \
    -result 1

test procs_over_length_count-1.0 \
    {Count procs with bodies over a specified number of lines.} \
    -setup $setup \
    -body {
        return [procs_over_length_count [list $test_file] 3]
    } \
    -result 1

cleanupTests
